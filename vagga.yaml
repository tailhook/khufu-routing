containers:
  js:
    setup:
    - !Alpine v3.6
    - !Install [nodejs-npm]
    - &nodeenv !Env
      NODE_PATH: /usr/lib/node_modules
      PATH: /bin:/usr/bin:/usr/local/bin:/usr/lib/node_modules/.bin
      BABEL_DISABLE_CACHE: 1
    - !YarnDependencies
    environ: *nodeenv

commands:
  make: !Command
    container: js
    run: [npm, run, build]

  test: !Command
    container: js
    run: [npm, run, test]
